# ๐ง ุฑุงูููุง ุฑูุน ุฎุทุง Public Projects

## โ ูุดฺฉู:

ุฎุทุง `invalid input syntax for type uuid: "58"` ููฺฏุงู ุงูุชุดุงุฑ ูพุฑูฺู

## ๐ ุนูุช:

- ุฌุฏูู `public_projects` ุงูุชุธุงุฑ `project_id` ุจู ุตูุฑุช UUID ุฏุงุฑู
- ูู ุฌุฏูู ุงุตู `projects` ุงุฒ BIGINT ุงุณุชูุงุฏู ูโฺฉูู
- `selectedProjectId` = 58 (ุนุฏุฏ ุณุงุฏู) ูู ุฏุชุงุจุณ UUID ูโุฎูุงุฏ

## โ ุฑุงูโุญู:

### ูุฑุญูู ฑ: ุงุฌุฑุง Migration ุฏุฑ Supabase Dashboard

1. ุจุฑู ุจู **Supabase Dashboard**: https://supabase.com/dashboard
2. ูพุฑูฺู ุฎูุฏุช ุฑู ุงูุชุฎุงุจ ฺฉู
3. ุงุฒ ููู ุณูุช ฺูพ **SQL Editor** ุฑู ุจุงุฒ ฺฉู
4. ฺฉ **New Query** ุจุฒู
5. ูุญุชูุง ูุงู ุฒุฑ ุฑู ฺฉูพ ู paste ฺฉู:

```
supabase/migrations/fix_public_projects_project_id_type.sql
```

6. ุฏฺฉูู **Run** ุฑู ุจุฒู
7. ุงฺฏุฑ ูููู ุจูุฏุ ุจุงุฏ ูพุงู "Success" ุฑู ุจุจู

### ูุฑุญูู ฒ: ุชุณุช ฺฉุฑุฏู

1. ุจุฑฺฏุฑุฏ ุจู ุจุฑูุงูู ู refresh ฺฉู
2. ฺฉ ูพุฑูฺู ุฑู ุงูุชุฎุงุจ ฺฉู
3. ุงุฒ ููู Settings โ Share ุจุฎุดุ ุฏฺฉูู "ุงูุชุดุงุฑ" ุฑู ุจุฒู
4. ุจุงุฏ ูพุงู "โ ูพุฑูฺู ุฏุฑ ุจุงุฒุงุฑ ููุชุดุฑ ุดุฏ!" ุฑู ุจุจู

### ูุฑุญูู ณ: ุจุฑุฑุณ ุฏุฑ Marketplace

1. ุจุฑู ุจู ุตูุญู ุงุตู `/`
2. ุงุณฺฉุฑูู ฺฉู ูพุงู ุชุง ุจุฎุด "๐ ูพุฑูฺูโูุง ุนููู"
3. ุจุงุฏ ูพุฑูฺู ููุชุดุฑ ุดุฏู ุฑู ุจุจู
4. ุฑู ุฏฺฉูู "ูุดุงูุฏู ููู ูพุฑูฺูโูุง" ฺฉูฺฉ ฺฉู
5. ุฏุฑ ุตูุญู `/marketplace` ูพุฑูฺู ุฑู ุจุงุฏ ุจุจู

## ๐ ุชุบุฑุงุช ุงุนูุงู ุดุฏู:

### Before (ูุจู):

```sql
project_id UUID NOT NULL  -- โ ููุน ุงุดุชุจุงู
```

### After (ุจุนุฏ):

```sql
project_id BIGINT NOT NULL  -- โ ููุน ุตุญุญ
```

## ๐ ุฌุฏุงูู ุชุบุฑ ุงูุชู:

- โ `public_projects` - project_id ุงุฒ UUID ุจู BIGINT
- โ `project_likes` - ุจุงุฒุณุงุฒ ุจุง foreign key ุตุญุญ
- โ `project_comments` - ุจุงุฒุณุงุฒ ุจุง foreign key ุตุญุญ
- โ RLS Policies - ุจุงุฒุณุงุฒ ฺฉุงูู
- โ RPC Functions - ุจูโุฑูุฒุฑุณุงู ุจุง ููุน ุฏุงุฏู ุตุญุญ

## โ๏ธ ูฺฉุงุช ููู:

1. ุงู migration ุฌุฏุงูู ููุฌูุฏ ุฑู **DROP** ูโฺฉูู ู ุฏูุจุงุฑู ูโุณุงุฒู
2. ุงฺฏุฑ ุฏุงุฏูโูุง test ุฏุฑ ุฌุฏุงูู ุฏุงุฑุ ูพุงฺฉ ูุดู
3. ุจุนุฏ ุงุฒ ุงุฌุฑุงุ ููู ฺุฒ ุฏูุจุงุฑู ุงุฒ ุตูุฑ ุดุฑูุน ูุดู
4. ุงฺฏุฑ ูโุฎูุง ุฏุงุฏูโูุง ุฑู ูฺฏู ุฏุงุฑุ ูุจู ุงุฒ ุงุฌุฑุง backup ุจฺฏุฑ

## ๐ Debugging:

ุงฺฏุฑ ุจุนุฏ ุงุฒ migration ูููุฒ ุฎุทุง ุฏุงุฑ:

### ุจุฑุฑุณ ฑ: ููุน project_id

```sql
SELECT column_name, data_type
FROM information_schema.columns
WHERE table_name = 'public_projects'
AND column_name = 'project_id';
```

ุจุงุฏ `bigint` ุฑู ูุดูู ุจุฏู.

### ุจุฑุฑุณ ฒ: ุจุฑุฑุณ RLS Policies

```sql
SELECT * FROM public_projects WHERE is_published = true;
```

ุงฺฏุฑ ุฎุงููุ ุนู ูููุฒ ูพุฑูฺูโุง publish ูุดุฏู.

### ุจุฑุฑุณ ณ: ุชุณุช RPC Function

```sql
SELECT * FROM get_public_projects('all', 10, 0);
```

ุจุงุฏ ูุณุช ูพุฑูฺูโูุง ุฑู ุจุฑฺฏุฑุฏููู (ุงฺฏุฑ publish ุดุฏู ุจุงุดู).

## ๐ก Alternative: ุงุณุชูุงุฏู ุงุฒ UUID ุฏุฑ ููู ุฌุง

ุงฺฏุฑ ูโุฎูุง ุงุฒ UUID ุงุณุชูุงุฏู ฺฉู (Best Practice):

1. ุฌุฏูู `projects` ุฑู ุชุบุฑ ุจุฏู ฺฉู ุงุฒ UUID ุงุณุชูุงุฏู ฺฉูู
2. ููู foreign key ูุง ุฑู ุจูโุฑูุฒุฑุณุงู ฺฉู
3. ฺฉุฏ ูุฑุงูุชโุงูุฏ ุฑู ุจูโุฑูุฒุฑุณุงู ฺฉู ฺฉู ุจุง UUID ฺฉุงุฑ ฺฉูู

ูู ุงู ฺฉุงุฑ ุฒูุงูโุจุฑุชุฑู ู ูุงุฒ ุจู ุชุบุฑุงุช ฺฏุณุชุฑุฏูโุชุฑ ุฏุงุฑู.

## ๐ ุจุนุฏ ุงุฒ ุงุตูุงุญ:

Migration ุฑู commit ฺฉู:

```bash
git add supabase/migrations/fix_public_projects_project_id_type.sql
git commit -m "fix: Change public_projects.project_id from UUID to BIGINT"
```
